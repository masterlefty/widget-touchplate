<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <title><!--(auto-fill by runme.js--></title>

    <!-- ChiliPeppr is based on bootstrap CSS. -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <!-- Customized version of require.js for ChiliPeppr. Please see require.js docs for how
    ChiliPeppr's dependency system works as it's based on require.js. -->
    <script type='text/javascript' src="//i2dcui.appspot.com/js/require.js"></script>

    <!-- widget.css DON'T REMOVE -->
    <style type='text/css'>
        /* widget.css will get inlined here by runme.js. don't remove this comment or inlining will fail. */
    </style>
    <link rel="stylesheet" type="text/css" href="widget.css">
    <!-- DON'T REMOVE end widget.css -->

    <!-- widget.js DON'T REMOVE -->
    <script type='text/javascript'>
        //<![CDATA[
        /* widget.js will get inlined here by runme.js. don't remove this comment or inlining will fail. */
        //]]>
    </script>
    <script type='text/javascript' src="widget.js"></script>
    <!-- DON'T REMOVE end widget.js -->

</head>

<body>
    <div id="com-chilipeppr-dlvp-widget-touchplate" class="panel panel-default com-chilipeppr-dlvp-widget-touchplate">
        <div class="panel-heading">

            <div class="btn-toolbar pull-right" role="toolbar">
                <div class="btn-group">
                    <button type="button" class="btn btn-xs btn-default hidebody"><span class="glyphicon glyphicon-chevron-up"></span>
                    </button>
                </div>
                <div class="btn-group">
                    <div class="dropdown">
                        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu"></ul>
                    </div>
                </div>
            </div> <span class="panel-title" data-toggle="popover">dlvp Widget Touchplate</span> <span style="font-size:9px;" class="fb-build">v2</span>

        </div>
        <div class="panel-body">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li><a href="#com-chilipeppr-dlvp-widget-touchplate-tab1" role="tab" data-toggle="tab">MCS G53</a>
                </li>
                <li class="active"><a href="#com-chilipeppr-dlvp-widget-touchplate-tab2" role="tab" data-toggle="tab"><span class = "com-chilipeppr-dlvp-widget-touchplate-tab2-name">G5x Float</span></a></li>
                <li><a href="#com-chilipeppr-dlvp-widget-touchplate-tab3" role="tab" data-toggle="tab"><span class = "com-chilipeppr-dlvp-widget-touchplate-tab3-name">G5x Fixed</span></a></li>
                <li><a href="#com-chilipeppr-dlvp-widget-touchplate-tab4" role="tab" data-toggle="tab">G30</a></li>
                <li><a href="#com-chilipeppr-dlvp-widget-touchplate-tab5" role="tab" data-toggle="tab">Notes</a></li>
            </ul>
            <!-- Tab panes -->

            <!-- Tab 1 -->
            <div class="tab-content">
                <div class="tab-pane" id="com-chilipeppr-dlvp-widget-touchplate-tab1">
                    <table class="table table-condensed table-bordered">
                        <tbody>
                            <tr>
                                <td class = "td-1L">
                                    <dd>- Legacy touchplate routine</dd>
                                    <dd>- Runs from current X-Y position</dd>
                                    <br>
                                    <dd>Notes:</dd>
                                    <dd style="font-size: 12px; padding-left: 10px; padding-right: 10px">Sets the machine’s absolute coordinate system (Coordinate System: G53) Z-value to zero</dd>
                                    <br><dd style="font-size: 12px; padding-left: 10px; padding-right: 10px"><i>Exercise caution after job finishes or subsequence tool changes.  Selecting “Go To Machine Home” or “Go To G5x Zero” there is a chance of crashing the tooling into the machine bed.</i></dd>
                                </td>
                                <td class = "td-1R">
                                    <p><button type="button" id="run1" class="btn xbtn-xs btn-primary btn-touchplaterun1" style="width:100%;">Run</button></p>
                                    <p></p>
                                    <div class="" style="text-align:right;">Feedrate to Probe</div>
                                    <div class="input-group">
                                        <input class="form-control frprobe" type="number" min="0" placeholder="0.00" value="25" />
                                        <div class="input-group-addon">mm/min</div>
                                    </div>
                                    <p></p>
                                    <div style="" xclass="input-group">
                                        <div class="" style="text-align:right;">Height of Plate</div>
                                        <div class="input-group">
                                            <input class="form-control htplate" type="number" min="0" placeholder="0.00" value="1.75" />
                                            <div class="input-group-addon">mm</div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Tab 2 -->
                <div class="tab-pane active" id="com-chilipeppr-dlvp-widget-touchplate-tab2">
                    <table class="table table-condensed table-bordered">
                        <tbody>
                            <tr>
                                <td class = "td-1L">
                                    <dd>- Runs from the current X-Y position</dd>
                                    <br>
                                    <dd>Notes:</dd>
                                    <dd span ="font-size: 12px; padding-left: 10px; padding-right: 10px">- “G5x Run” will set the current work coordinate system (G5x) Z-value to zero</dd>
                                    <dd style="font-size: 12px; padding-left: 10px; padding-right: 10px">- “G92 Run” will set a temporary offset in the current work coordinate system. 
                                    <i>Consider adding a G92.1 command at the end of your program to cancel the offset.</i></dd>
                                </td>
                                <td style="padding: 10px">
                                    <p>
                                        <button type="button" id="run2" class="btn xbtn-xs btn-primary btn-touchplaterun2" style="width:48%;">G5x Run</button>
                                        <button type="button" id="run3" class="btn xbtn-xs btn-info btn-touchplaterun3" style="width:48%;">G92 Run</button>
                                    </p>
                                    <p></p>
                                    <div class="" style="text-align:right;">Feedrate to Probe</div>
                                    <div class="input-group">
                                        <input class="form-control frprobe" type="number" min="0" placeholder="0.00" value="25" />
                                        <div class="input-group-addon">mm/min</div>
                                    </div>
                                    <p></p>
                                    <div style="" xclass="input-group">
                                        <div class="" style="text-align:right;">Height of Plate</div>
                                        <div class="input-group">
                                            <input class="form-control htplate" type="number" min="0" placeholder="0.00" value="1.75" />
                                            <div class="input-group-addon">mm</div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Tab 3 -->
                <div class="tab-pane" id="com-chilipeppr-dlvp-widget-touchplate-tab3">
                    <table class="table table-condensed table-bordered">
                        <tbody>
                            <tr>
                                <td class = "td-1L">
                                    <dd>- Runs from the pre-defined XYZ position</dd>
                                    <br>
                                    <dd>Notes:</dd>
                                    <dd>- Head will rise to Z-clearance value before moving to fixed position.</dd>
                                    <dd>- “G5x Run” will set the current work coordinate system (G5x) Z-value to zero.</dd>
                                    <dd>- “G92 Run” will set a temporary offset in the current work coordinate system. 
                                    <i>Consider adding a G92.1 command at the end of your program to cancel the offset.</i></dd>
                                </td>
                                <td style="padding: 10px">
                                    <p>
                                        <button type="button" id="run4" class="btn xbtn-xs btn-primary btn-touchplaterun4" style="width:48%;">G5x Run</button>
                                        <button type="button" id="run5" class="btn xbtn-xs btn-info btn-touchplaterun5" style="width:48%;">G92 Run</button>
                                    </p>
                                    <p></p>
                                    <div class="" style="text-align:right;">Feedrate to Probe</div>
                                    <div class="input-group">
                                        <input class="form-control frprobe" type="number" min="0" placeholder="0.00" value="25" />
                                        <div class="input-group-addon">mm/min</div>
                                    </div>
                                    <p></p>
                                    <div style="" xclass="input-group">
                                        <div class="" style="text-align:right;">Height of Plate</div>
                                        <div class="input-group">
                                            <input class="form-control htplate" type="number" min="0" placeholder="0.00" value="1.75" />
                                            <div class="input-group-addon">mm</div>
                                        </div>
                                    </div>
                                    <div style="" xclass="input-group">
                                        <div class="" style="text-align:right;">Z Clearance</div>
                                        <div class="input-group">
                                            <input class="form-control zclear" type="number" min="0" placeholder="0.00" value="10" />
                                            <div class="input-group-addon">mm</div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Tab 4 -->
                <div class="tab-pane" id="com-chilipeppr-dlvp-widget-touchplate-tab4">
                    <table class="table table-condensed table-bordered">
                        <tbody>
                            <tr>
                                <td class ="td-1L" style = "text-align: left">
                                    <dd>Defines the fixed location for a machine mounted fixed touchplate</dd>
                                    <br>
                                    <dd>Notes:</dd>
                                    <dd>- Position head’s X and Y axes over the touchplate.</dd>
                                    <dd>- Adjust Z-height to ensure tooling will always clear the touchplate.</dd>
                                    <dd>- Click button to set the XYZ location.</dd>
                                </td>
                                <td style="padding: 10px; text-align:center">
                                    <p><button type="button" id="run6" class="btn xbtn-xs btn-primary btn-touchplaterun6" style="width:80%;">G30 Current Position</button></p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Tab 5 -->
                <div class="tab-pane settings-notes" id="com-chilipeppr-dlvp-widget-touchplate-tab5" data-role="none">
                    <p><a href="#mcs">Jump to MCS (G53) </a> | <a href="#wcsfl"> Jump to WCS Floating</a> | <a href="#wcsfx">Jump to WCS Fixed</a>
                    </p>
                    <dl>
                        <dt><b>General Notes</b></dt>
                        <li>The Probe Cycle runs in the base Machine units of 
                            mm (G21), and in the machine’s absolute coordinate 
                            system (MCS or G53) regardless of the parts defined 
                            units or coordinate system. If the gcode program 
                            does not define the units, after running the routine 
                            ensure the machine is set to correct units (G20/G21) 
                            to match the job.
                        </li>
                    </dl>
                    
                    <dl>
                        <dt><b>Electrical Connections</b></dt>
                        <li>Connect tool to an input ground on the TinyG board
                        </li>
                        <li>Wire the touchplate to the Z-min input on the TingG
                        </li>
                    </dl>
                  
                    <dl>
                        <dt><b>Probe Operations</b></dt>
                        <li>Enter the feedrate, height of probe, and 
                            z-clearance (fixed tab) values.</li>
                        <li>After the routine is finished, the Z-zero value is 
                            set to the surface on which the touchplate rests 
                            based on the plate height input value.</li>
                        <li>Run this widget after each tool change.</li>
                        <dt><li>Exercise caution after a subsequence tool 
                            change without re-running this Widget.</li></dt>
                        <dd>If you use the go to home/zero commands (Machine 
                            or WCS), there is a chance of crashing the tool 
                            into the workbed or workpiece.</dd>
                    </dl>
                    
                    <dl>
                        <dt><b>Tips</b></dt>
                        <li>Placing the touchplate on the machine bed will 
                            define the part’s Z-zero to the bottom of the 
                            material stock.</li>
                        <li>This option will save wear and tear on the 
                            machine’s waste board.</li>
                        <li>To define the stock top as Z-zero, add the 
                            nominal thickness of the material to the input 
                            value for the height of probe.</li>
                    </dl>
                  
                    <dl><hr>
                        <dt id="mcs"><b>MCS</b> (G53) -</dt>
                        <dd>- Probing sequence runs from the machine’s 
                            current X-Y position.</dd>
                        <dd>- Locate the moveable touchplate on the desired 
                             work surface, and position the tool so it is 
                             located above (~1” or 25mm) the touchplate.</dd>
                        <dd>- Once the job(s) is/are complete, consider 
                             rehoming the Machine’s absolute Z-axis coordinate.
                             <i>(G28.2 z0, if limit switches are installed; 
                             or adjust manually and use the G28.3 z0, if no 
                             limit switches).</i></dd>
                        
                    <ul><dt>Notes:</dt>
                        <dd>- This routine has been installed to support 
                            legacy versions of Chilipeppr.</dd>
                        <dd>- This routine does <u>not</u> set G5x Z-axis to 
                            zero(0), unless the WCS is mapped to the machines'
                            absolute coordinate system (MCS>.</dd>
                        <dd>- Any offset coordinate systems (G54, G55, etc) are
                            readjusted based on the new Machine Z-0 value. (The
                            offset values in G10 L2 Pn Zn are not changed).</dd>
                        <dd>- This routine is useful if you do not utilize work
                            coordinates (WCS), or if current WCS (ex. G54) is 
                            mapped to the Machine’s absolute (MCS) coordinates.
                            </dd>
                    </ul>
                    
                    <ul><dt>Cautions:</dt>
                        <dd>- If homing switches have been installed and the
                            machine is homed (G28.2 X0 Y0 Z0), then Z-0 was set
                            to the top of the Z-axis travel (Z max).</dd>
                        <dd>- This routine will remap the Z-axis zero value to 
                            near or on the machine bed.</dd>
                        <dd>- Consider resetting the soft limit Z min value 
                            [ztn] to define new work volume travel limits (Ex. 
                            Thickness of part), or use one of the WCS routines.
                            </dd>
                    </ul>                    

                    <dl><hr>
                        <dt id="wcsfl">WCS (G5x) Floating -</dt>
                        <dd>- Probing sequence runs from the machine’s 
                            current X-Y position</dd>
                        <dd>- Locate the moveable touchplate on the desired 
                            work surface, and position the tool so it is 
                            located above (~1” or 25mm) the touchplate.</dd>
                        

                    <ul><dt>Notes:</dt>
                        <dd>- This routine will set the G5x Z-axis to zero(0).
                        </dd>
                        <dd>- Useful if you always keep the same tool loaded, 
                            or if you have a defined X-0, Y-0 setup locations 
                            (ex. G54 – G59 WCS).</dd>
                        <dd>- The routine only rewrites the Z-0 parameter 
                            (G10 L2 P# Zn) and does not affect the X and Y 
                            axis zero locations.</dd>
                    </ul>

                    <dl><hr>
                        <dt id="wcsfx"><b>WCS</b> (G5x) Fixed -</dt>
                        <dd>- Utilizes a touchplate that is fixed to the work
                            surface of the machine.</dd>
                        <dd>- The probing sequence moves (via G30) the machine 
                            to this predetermined location XYZ.</dd>
                        <dd>- To clear the workpiece, the head is first raised 
                            to the z-clearance value and then translates to the 
                            fixed touchplate location.</dd>
                        <dd>- If the fixed location has not yet been defined, 
                            use the G30 tab to set this value.</dd>

                    <ul><dt>Notes:</dt>
                        <dd>- This routine will set the machine bed as Z-0 in 
                            the G5x coordinate system.</dd>
                        <dd>- To make the top of the part Z-0, add the nominal 
                            thickness of the material to the probe height input 
                            value.</dd>
                    </ul>
                    </dl>

                    <dl><hr>
                        <dt><b>WCS</b> (G5x) G92 offset -</dt>
                        <dd>- Useful if you keep a pre-defined Z-0 that is a 
                            safe distance away from the machine bed.</dd>
                        <dd>- The G92 offset will establish a temporary Z-0 
                            offset until it is turned off.</dd>
                        <dd>- Once the job has run, turn off the offset 
                            (via G92.1) and the Z-0 value will revert back to
                            the defined value for the selected coordinate 
                            system.</dd>
                        <dd>- Selected from the floating tab, the sequence will
                            run from the machines’ current X-Y position.</dd>
                        <dd>- Selected from the fixed tab, the sequence will 
                            move to the fixed plate location before running 
                            the probe cycle.</dd>
                    </dl>

                </div>

            </div>

        </div>
    </div>
</body>

</html>
